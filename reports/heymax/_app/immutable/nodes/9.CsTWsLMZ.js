import{s as nt,d as u,i as _,a as O,b as v,c as g,h as it,e as D,f as Q,g as P,j as w,k as q,l as V,m as ot,o as st,p as at,q as lt,n as I,v as G,r as ft,t as ut,u as _t}from"../chunks/scheduler.DufB5zxC.js";import{S as mt,i as ct,d as S,t as F,a as A,c as J,m as H,b as z,e as N,g as K}from"../chunks/index.BKD2aKQE.js";import{D as pt,C as B}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.y7BAxAgH.js";import{w as dt}from"../chunks/entry.DxLGiVbs.js";import{e as $t,s as bt,Q as X,p as yt,a as Y,r as Z,C as ht}from"../chunks/inferColumnTypes.C2Yvn-CT.js";import{h as L}from"../chunks/setTrackProxy.Cyfckp0w.js";import{p as gt}from"../chunks/stores.BVELYVsf.js";import{D as wt}from"../chunks/Details.BAU1i66H.js";import{Q as rt}from"../chunks/QueryViewer.DgCKllRT.js";import{p as kt}from"../chunks/profile.BW8tN6E9.js";function Ct(p){let r,a=d.title+"",e;return{c(){r=q("h1"),e=_t(a),this.h()},l(i){r=D(i,"H1",{class:!0});var l=ft(r);e=ut(l,a),l.forEach(u),this.h()},h(){v(r,"class","title")},m(i,l){_(i,r,l),O(r,e)},p:I,d(i){i&&u(r)}}}function vt(p){return{c(){this.h()},l(r){this.h()},h(){document.title="Evidence"},m:I,p:I,d:I}}function Tt(p){let r,a,e,i,l;return document.title=r=d.title,{c(){a=w(),e=q("meta"),i=w(),l=q("meta"),this.h()},l(n){a=g(n),e=D(n,"META",{property:!0,content:!0}),i=g(n),l=D(n,"META",{name:!0,content:!0}),this.h()},h(){var n,f;v(e,"property","og:title"),v(e,"content",((n=d.og)==null?void 0:n.title)??d.title),v(l,"name","twitter:title"),v(l,"content",((f=d.og)==null?void 0:f.title)??d.title)},m(n,f){_(n,a,f),_(n,e,f),_(n,i,f),_(n,l,f)},p(n,f){f&0&&r!==(r=d.title)&&(document.title=r)},d(n){n&&(u(a),u(e),u(i),u(l))}}}function Rt(p){var l,n;let r,a,e=(d.description||((l=d.og)==null?void 0:l.description))&&Et(),i=((n=d.og)==null?void 0:n.image)&&xt();return{c(){e&&e.c(),r=w(),i&&i.c(),a=Q()},l(f){e&&e.l(f),r=g(f),i&&i.l(f),a=Q()},m(f,m){e&&e.m(f,m),_(f,r,m),i&&i.m(f,m),_(f,a,m)},p(f,m){var E,k;(d.description||(E=d.og)!=null&&E.description)&&e.p(f,m),(k=d.og)!=null&&k.image&&i.p(f,m)},d(f){f&&(u(r),u(a)),e&&e.d(f),i&&i.d(f)}}}function Et(p){let r,a,e,i,l;return{c(){r=q("meta"),a=w(),e=q("meta"),i=w(),l=q("meta"),this.h()},l(n){r=D(n,"META",{name:!0,content:!0}),a=g(n),e=D(n,"META",{property:!0,content:!0}),i=g(n),l=D(n,"META",{name:!0,content:!0}),this.h()},h(){var n,f,m;v(r,"name","description"),v(r,"content",d.description??((n=d.og)==null?void 0:n.description)),v(e,"property","og:description"),v(e,"content",((f=d.og)==null?void 0:f.description)??d.description),v(l,"name","twitter:description"),v(l,"content",((m=d.og)==null?void 0:m.description)??d.description)},m(n,f){_(n,r,f),_(n,a,f),_(n,e,f),_(n,i,f),_(n,l,f)},p:I,d(n){n&&(u(r),u(a),u(e),u(i),u(l))}}}function xt(p){let r,a,e;return{c(){r=q("meta"),a=w(),e=q("meta"),this.h()},l(i){r=D(i,"META",{property:!0,content:!0}),a=g(i),e=D(i,"META",{name:!0,content:!0}),this.h()},h(){var i,l;v(r,"property","og:image"),v(r,"content",Y((i=d.og)==null?void 0:i.image)),v(e,"name","twitter:image"),v(e,"content",Y((l=d.og)==null?void 0:l.image))},m(i,l){_(i,r,l),_(i,a,l),_(i,e,l)},p:I,d(i){i&&(u(r),u(a),u(e))}}}function Dt(p){let r,a="Earlier in User Growth we briefly looked at the distribution of retained users over a period of 3 months from Mar to Jun. Here we explore user retention rate in greater details.",e,i,l="We define user retention rate as follows:",n,f,m,E,k,C="Retention = (Users_END - Users_NEW)x100/(Users_START)",T,b,R,x,h,o='<li><span style="font-size:11px;">Users_END = number of Users at the end of the time period</span></li> <li><span style="font-size:11px;">Users_NEW = number of Users who signup during the period</span></li> <li><span style="font-size:11px;">Users_START = number of Users at the start of the period</span></li>',$,U,M,c,y="Here, we assign users into different cohorts according to their signup date. We then look at the number of users that remained in their respective cohorts at different time periods, e.g. 7 days, 1 month, 2 months etc.";return{c(){r=q("p"),r.textContent=a,e=w(),i=q("span"),i.textContent=l,n=w(),f=q("br"),m=q("br"),E=w(),k=q("span"),k.textContent=C,T=w(),b=q("br"),R=q("br"),x=w(),h=q("ul"),h.innerHTML=o,$=w(),U=q("br"),M=w(),c=q("p"),c.textContent=y,this.h()},l(t){r=D(t,"P",{class:!0,"data-svelte-h":!0}),P(r)!=="svelte-4mgf1d"&&(r.textContent=a),e=g(t),i=D(t,"SPAN",{style:!0,"data-svelte-h":!0}),P(i)!=="svelte-12xeekg"&&(i.textContent=l),n=g(t),f=D(t,"BR",{}),m=D(t,"BR",{}),E=g(t),k=D(t,"SPAN",{style:!0,"data-svelte-h":!0}),P(k)!=="svelte-15s7j3z"&&(k.textContent=C),T=g(t),b=D(t,"BR",{}),R=D(t,"BR",{}),x=g(t),h=D(t,"UL",{"data-svelte-h":!0}),P(h)!=="svelte-159rzkq"&&(h.innerHTML=o),$=g(t),U=D(t,"BR",{}),M=g(t),c=D(t,"P",{class:!0,"data-svelte-h":!0}),P(c)!=="svelte-fby3qd"&&(c.textContent=y),this.h()},h(){v(r,"class","markdown"),G(i,"font-size","15px"),G(k,"font-style","italic"),G(k,"font-size","14px"),v(c,"class","markdown")},m(t,s){_(t,r,s),_(t,e,s),_(t,i,s),_(t,n,s),_(t,f,s),_(t,m,s),_(t,E,s),_(t,k,s),_(t,T,s),_(t,b,s),_(t,R,s),_(t,x,s),_(t,h,s),_(t,$,s),_(t,U,s),_(t,M,s),_(t,c,s)},p:I,d(t){t&&(u(r),u(e),u(i),u(n),u(f),u(m),u(E),u(k),u(T),u(b),u(R),u(x),u(h),u($),u(U),u(M),u(c))}}}function qt(p){let r,a,e,i,l,n,f,m,E,k,C,T,b,R,x,h;return r=new B({props:{id:"signup_date"}}),e=new B({props:{id:"country"}}),l=new B({props:{id:"d0_retention_rate",title:"Day0 Retention Rate",contentType:"bar",barColor:"#D76C82"}}),f=new B({props:{id:"d1_retention_rate",title:"Day1 Retention Rate",contentType:"bar",barColor:"#FEC5F6"}}),E=new B({props:{id:"d7_retention_rate",title:"Day7 Retention Rate",contentType:"bar",barColor:"#DC8BE0"}}),C=new B({props:{id:"d30_retention_rate",title:"Day30 Retention Rate",contentType:"bar",barColor:"#DB8DD0"}}),b=new B({props:{id:"d60_retention_rate",title:"Day60 Retention Rate",contentType:"bar",barColor:"#C562AF"}}),x=new B({props:{id:"d90_retention_rate",title:"Day90 Retention Rate",contentType:"bar",barColor:"#B33791"}}),{c(){N(r.$$.fragment),a=w(),N(e.$$.fragment),i=w(),N(l.$$.fragment),n=w(),N(f.$$.fragment),m=w(),N(E.$$.fragment),k=w(),N(C.$$.fragment),T=w(),N(b.$$.fragment),R=w(),N(x.$$.fragment)},l(o){z(r.$$.fragment,o),a=g(o),z(e.$$.fragment,o),i=g(o),z(l.$$.fragment,o),n=g(o),z(f.$$.fragment,o),m=g(o),z(E.$$.fragment,o),k=g(o),z(C.$$.fragment,o),T=g(o),z(b.$$.fragment,o),R=g(o),z(x.$$.fragment,o)},m(o,$){H(r,o,$),_(o,a,$),H(e,o,$),_(o,i,$),H(l,o,$),_(o,n,$),H(f,o,$),_(o,m,$),H(E,o,$),_(o,k,$),H(C,o,$),_(o,T,$),H(b,o,$),_(o,R,$),H(x,o,$),h=!0},p:I,i(o){h||(A(r.$$.fragment,o),A(e.$$.fragment,o),A(l.$$.fragment,o),A(f.$$.fragment,o),A(E.$$.fragment,o),A(C.$$.fragment,o),A(b.$$.fragment,o),A(x.$$.fragment,o),h=!0)},o(o){F(r.$$.fragment,o),F(e.$$.fragment,o),F(l.$$.fragment,o),F(f.$$.fragment,o),F(E.$$.fragment,o),F(C.$$.fragment,o),F(b.$$.fragment,o),F(x.$$.fragment,o),h=!1},d(o){o&&(u(a),u(i),u(n),u(m),u(k),u(T),u(R)),S(r,o),S(e,o),S(l,o),S(f,o),S(E,o),S(C,o),S(b,o),S(x,o)}}}function tt(p){let r,a;return r=new rt({props:{queryID:"retention",queryResult:p[0]}}),{c(){N(r.$$.fragment)},l(e){z(r.$$.fragment,e)},m(e,i){H(r,e,i),a=!0},p(e,i){const l={};i&1&&(l.queryResult=e[0]),r.$set(l)},i(e){a||(A(r.$$.fragment,e),a=!0)},o(e){F(r.$$.fragment,e),a=!1},d(e){S(r,e)}}}function et(p){let r,a;return r=new rt({props:{queryID:"countries",queryResult:p[1]}}),{c(){N(r.$$.fragment)},l(e){z(r.$$.fragment,e)},m(e,i){H(r,e,i),a=!0},p(e,i){const l={};i&2&&(l.queryResult=e[1]),r.$set(l)},i(e){a||(A(r.$$.fragment,e),a=!0)},o(e){F(r.$$.fragment,e),a=!1},d(e){S(r,e)}}}function Mt(p){let r,a,e,i,l,n,f,m,E='<a href="#charts">Charts</a>',k,C,T,b,R,x,h=typeof d<"u"&&d.title&&d.hide_title!==!0&&Ct();function o(t,s){return typeof d<"u"&&d.title?Tt:vt}let U=o()(p),M=typeof d=="object"&&Rt();n=new wt({props:{title:"Definitions",$$slots:{default:[Dt]},$$scope:{ctx:p}}}),C=new pt({props:{data:p[0],$$slots:{default:[qt]},$$scope:{ctx:p}}});let c=p[0]&&tt(p),y=p[1]&&et(p);return{c(){h&&h.c(),r=w(),U.c(),a=q("meta"),e=q("meta"),M&&M.c(),i=Q(),l=w(),N(n.$$.fragment),f=w(),m=q("h2"),m.innerHTML=E,k=w(),N(C.$$.fragment),T=w(),c&&c.c(),b=w(),y&&y.c(),R=Q(),this.h()},l(t){h&&h.l(t),r=g(t);const s=it("svelte-2igo1p",document.head);U.l(s),a=D(s,"META",{name:!0,content:!0}),e=D(s,"META",{name:!0,content:!0}),M&&M.l(s),i=Q(),s.forEach(u),l=g(t),z(n.$$.fragment,t),f=g(t),m=D(t,"H2",{class:!0,id:!0,"data-svelte-h":!0}),P(m)!=="svelte-19bkvc7"&&(m.innerHTML=E),k=g(t),z(C.$$.fragment,t),T=g(t),c&&c.l(t),b=g(t),y&&y.l(t),R=Q(),this.h()},h(){v(a,"name","twitter:card"),v(a,"content","summary_large_image"),v(e,"name","twitter:site"),v(e,"content","@evidence_dev"),v(m,"class","markdown"),v(m,"id","charts")},m(t,s){h&&h.m(t,s),_(t,r,s),U.m(document.head,null),O(document.head,a),O(document.head,e),M&&M.m(document.head,null),O(document.head,i),_(t,l,s),H(n,t,s),_(t,f,s),_(t,m,s),_(t,k,s),H(C,t,s),_(t,T,s),c&&c.m(t,s),_(t,b,s),y&&y.m(t,s),_(t,R,s),x=!0},p(t,[s]){typeof d<"u"&&d.title&&d.hide_title!==!0&&h.p(t,s),U.p(t,s),typeof d=="object"&&M.p(t,s);const j={};s&16777216&&(j.$$scope={dirty:s,ctx:t}),n.$set(j);const W={};s&1&&(W.data=t[0]),s&16777216&&(W.$$scope={dirty:s,ctx:t}),C.$set(W),t[0]?c?(c.p(t,s),s&1&&A(c,1)):(c=tt(t),c.c(),A(c,1),c.m(b.parentNode,b)):c&&(K(),F(c,1,1,()=>{c=null}),J()),t[1]?y?(y.p(t,s),s&2&&A(y,1)):(y=et(t),y.c(),A(y,1),y.m(R.parentNode,R)):y&&(K(),F(y,1,1,()=>{y=null}),J())},i(t){x||(A(n.$$.fragment,t),A(C.$$.fragment,t),A(c),A(y),x=!0)},o(t){F(n.$$.fragment,t),F(C.$$.fragment,t),F(c),F(y),x=!1},d(t){t&&(u(r),u(l),u(f),u(m),u(k),u(T),u(b),u(R)),h&&h.d(t),U.d(t),u(a),u(e),M&&M.d(t),u(i),S(n,t),S(C,t),c&&c.d(t),y&&y.d(t)}}}const d={title:"User retention"};function Ut(p,r,a){let e,i;V(p,gt,s=>a(12,e=s)),V(p,Z,s=>a(18,i=s));let{data:l}=r,{data:n={},customFormattingSettings:f,__db:m,inputs:E}=l;ot(Z,i="e4ac442a2149aa3e2a8ba61e49a10f1c",i);let k=$t(dt(E));st(k.subscribe(s=>E=s)),at(ht,{getCustomFormats:()=>f.customFormats||[]});const C=(s,j)=>kt(m.query,s,{query_name:j});bt(C),e.params,lt(()=>!0);let T={initialData:void 0,initialError:void 0},b=L`select cohort_date::date as signup_date, country, cohort_size, 
d0_retention_rate,
d1_retention_rate, d7_retention_rate, d30_retention_rate, 
d60_retention_rate, d90_retention_rate 
from 
pgsql.retention
order by cohort_date`,R=`select cohort_date::date as signup_date, country, cohort_size, 
d0_retention_rate,
d1_retention_rate, d7_retention_rate, d30_retention_rate, 
d60_retention_rate, d90_retention_rate 
from 
pgsql.retention
order by cohort_date`;n.retention_data&&(n.retention_data instanceof Error?T.initialError=n.retention_data:T.initialData=n.retention_data,n.retention_columns&&(T.knownColumns=n.retention_columns));let x,h=!1;const o=X.createReactive({callback:s=>{a(0,x=s)},execFn:C},{id:"retention",...T});o(R,{noResolve:b,...T}),globalThis[Symbol.for("retention")]={get value(){return x}};let $={initialData:void 0,initialError:void 0},U=L`select distinct country
from pgsql.growth_metrics_month`,M=`select distinct country
from pgsql.growth_metrics_month`;n.countries_data&&(n.countries_data instanceof Error?$.initialError=n.countries_data:$.initialData=n.countries_data,n.countries_columns&&($.knownColumns=n.countries_columns));let c,y=!1;const t=X.createReactive({callback:s=>{a(1,c=s)},execFn:C},{id:"countries",...$});return t(M,{noResolve:U,...$}),globalThis[Symbol.for("countries")]={get value(){return c}},p.$$set=s=>{"data"in s&&a(2,l=s.data)},p.$$.update=()=>{p.$$.dirty&4&&a(3,{data:n={},customFormattingSettings:f,__db:m}=l,n),p.$$.dirty&8&&yt.set(Object.keys(n).length>0),p.$$.dirty&4096&&e.params,p.$$.dirty&240&&(b||!h?b||(o(R,{noResolve:b,...T}),a(7,h=!0)):o(R,{noResolve:b})),p.$$.dirty&3840&&(U||!y?U||(t(M,{noResolve:U,...$}),a(11,y=!0)):t(M,{noResolve:U}))},a(5,b=L`select cohort_date::date as signup_date, country, cohort_size, 
d0_retention_rate,
d1_retention_rate, d7_retention_rate, d30_retention_rate, 
d60_retention_rate, d90_retention_rate 
from 
pgsql.retention
order by cohort_date`),a(6,R=`select cohort_date::date as signup_date, country, cohort_size, 
d0_retention_rate,
d1_retention_rate, d7_retention_rate, d30_retention_rate, 
d60_retention_rate, d90_retention_rate 
from 
pgsql.retention
order by cohort_date`),a(9,U=L`select distinct country
from pgsql.growth_metrics_month`),a(10,M=`select distinct country
from pgsql.growth_metrics_month`),[x,c,l,n,T,b,R,h,$,U,M,y,e]}class jt extends mt{constructor(r){super(),ct(this,r,Ut,Mt,nt,{data:2})}}export{jt as component};
